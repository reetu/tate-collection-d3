<!DOCTYPE html>
<html>
	<head>
		<title>D3 for the Tate Modern Collection</title>
		<style type="text/css">

			body
			{
				padding-top: 50px;
				padding-left: 100px;
			}

			#chartArea {
				width: 400px;
				height: 300px;
				background-color: #CCC;
			}

			.bar
			{
				display: inline-block;
				margin-right: 2px;
				fill: teal;
			}

		</style>
		<script src="components/d3.js" charset="utf-8"></script>
		<script src="components/lodash.js" charset="utf-8"></script>
	</head>

<body>

	<div id="chartArea"></div>

	<script type="text/javascript">
		// Random dataset
		var dataset = _.map(_.range(10), function (i) {
			return Math.random() * 50;
		});
		
		var chartWidth = 400;
		var chartHeight = 300;
		var barWidth = 20;
		var barSpacing = 2;

		// ordinal scale offers rangeBands
		var xScale = d3.scale.ordinal()
				.domain(dataset)
				.rangeBands([0, chartWidth], 0.05, 0.3); // (range, insidePadding, outsidePadding)

		// scale maps data from input domain (actual values) to output range (scaled value)
		var domainMax = d3.max(dataset) * 1.1;
		var yScale = d3.scale.linear()
				.domain([0, domainMax])
				.range([0, chartHeight]);

		var svg = d3.select('#chartArea').append('svg')
				.attr('width', chartWidth)
				.attr('height', chartHeight);

		// rect.x, rect.y -> positioning of top left corner of rect
		// rect.width, rect.height -> dimensions of rect

		svg.selectAll('rect')
				.data(dataset)
				.enter()
				.append('rect')
				.attr('class', 'bar')
				.attr('x', function (data, index) {
					// use scaled bar positioning
					return xScale(data);
				})
				.attr('y', function (data) {
					// relative to chartHeight so that bars are positioned aligned to the bottom of the chartArea
					return chartHeight - yScale(data);
				})
				.attr('height', function (data) {
					// scaled bar height, depending on domain size
					return yScale(data);
				})
				.attr('width', xScale.rangeBand()); // dynamic bar width

	</script>

</body>
</html>